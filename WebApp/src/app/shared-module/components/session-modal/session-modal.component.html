<ng-template #sessionModal let-modal>
    <div class="sessionmodal__container">
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Sessione {{session.name}} (Sessione {{sessionIndex+1}} - Settimana {{weekIndex+1}} - Allenamento <a class="badge badge-info" href="trainings/{{training._id}}">{{training._id}}</a>)</h4>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div id="sessionContainer" class="card">
                <div class="card-header m-0 px-0 text-white" style="background-color: rgba(0, 0, 0, 0.6) !important;">
                    <div class="row m-0 px-3 py-0" style="font-size: small; font-style: italic;">
                        <div class="col-4 px-0">
                            <span>Esercizio (variante)</span>
                        </div>
                        <div class="col-8 pr-0">
                            <div class="row m-0 d-flex">
                                <span *ngIf="options.format.seriesFormat == 'seriesxrep'">Serie &times; Ripetizioni</span>
                                <span *ngIf="options.format.seriesFormat == 'repxseries'">Ripetizioni &times; Serie</span>
                                <span class="ml-auto">Riposo</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body h-100 p-0">
                    <div *ngFor="let exercise of session.exercises; index as exerciseIndex" class="row m-0 px-3 py-1 border border-left-0 border-right-0 border-top-0">
                        <div class="col-4 px-0">
                            <div><span>{{exercise.exercise.name}} ({{exercise.exercise.variant.name}})</span></div>
                            <div><small>({{exercise.exercise.description}})</small></div>
                        </div>
                        <div class="col-8 pr-0">
                            <div *ngFor="let series of exercise.series; index as seriesIndex" class="row m-0 d-flex">
                                <span *ngIf="options.format.seriesFormat == 'seriesxrep'">{{series.seriesNumber}} &times; {{series.repNumber}} @ {{series.weight}} {{series.measure}}</span>
                                <span *ngIf="options.format.seriesFormat == 'repxseries'">{{series.repNumber}} &times; {{series.seriesNumber}} @ {{series.weight}} {{series.measure}}</span>
                                <span class="ml-auto">{{series.rest}}''</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-footer border-0 bg-white px-3">
                    <span>{{(session.comment == null || session.comment == '') ? 'Nessun commento' : ('Commento: ' + session.comment)}}</span>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="position-relative">
                <button class="btn btn-info" ngbAutofocus (click)="printSession()">Stampa</button>
                <button class="btn btn-success ml-2" ngbAutofocus (click)="downloadSession()">Scarica</button>
            </div>
        </div>
    </div>
</ng-template>

<div (click)="openSessionModal(sessionModal)">
    <ng-content></ng-content>
</div>